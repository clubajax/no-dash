<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Test NoDash</title>
	<link rel="stylesheet" href="../node_modules/mocha/mocha.css">
	<script src="../node_modules/mocha/mocha.js"></script>
	<script src="../node_modules/chai/chai.js"></script>
	<script src="../src/no-dash.js"></script>

	<script src="//localhost:35750/livereload.js"></script>

</head>
<body>
<h1>Test NoDash</h1>

<div id="mocha"></div>

<script>
	window.mocha.setup('tdd');

	suite('NoDash', function () {
		this.timeout(3000);
		var
			nodash = window.nodash,
			suite = window.suite,
			test = window.test,
			expect = chai.expect,
			body = document.body,
			data01 = [{
				label: 'Coke',
				value: .71
			}, {
				label: 'Pepsi',
				value: .65
			}, {
				label: '7 Up',
				value: .30
			}, {
				label: 'Dr Pepper',
				value: .54
			}],
			dataComplex1 = [
				{
					date: new Date(1511382870680),
					array: [1, 2, 3, { a: 'string' }]
				},
				true,
				false,
				1 / 0,
				+'a'
			],
			dataComplex2 = [
				{
					date: new Date(1511382870680),
					array: [1, 2, 3, { a: 'string' }]
				},
				true,
				false,
				1 / 0,
				+'a',
				null,
				undefined
			],
			dataBase = [
				{
					label: 'Coke',
					high: 1.85,
					low: -.2,
					base: 0
				}, {
					label: 'Pepsi',
					high: .6,
					low: -.9,
					base: 0
				}],
			dataItems = [{
				label: 'Radio',
				value: .20
			}, {
				label: 'Print',
				value: .05
			}, {
				label: 'TV',
				value: .32
			}, {
				label: 'Web',
				value: .20
			}],
		dataDeep = [
			{
				label: 'foo',
				data: [
					{
						label: 'a',
						value: [1,2,3,4]
					}, {
						label: 'b',
						value: [5,6,7,8]
					}
				]
			},{
				label: 'bar',
				data: [
					{
						label: 'c',
						value: [9,10,11,12]
					}, {
						label: 'd',
						value: [13,14,15,16]
					}
				]
			}
		];


		suite('no-dash', function () {

			test('it should exist', function () {
				expect(typeof nodash).to.equal('object');
			});


			test('it should return item type', function () {
				expect(nodash.getType(1)).to.equal('number');
				expect(nodash.getType('a')).to.equal('string');
				expect(nodash.getType(new Date())).to.equal('date');
				expect(nodash.getType(() => {})).to.equal('function');
				expect(nodash.getType({})).to.equal('object');

				expect(nodash.getType(window)).to.equal('window');
				expect(nodash.getType(document)).to.equal('html');
				expect(nodash.getType(document.createElement('b'))).to.equal('html');
			});

			test('it should copy data', function () {
				const data = nodash.copy(data01);

				expect(data).to.not.equal(data01);
				expect(data[0]).to.not.equal(data01[0]);
				expect(data.length).to.equal(data01.length);
				expect(data[0].value).to.equal(data01[0].value);
				expect(data[0].label).to.equal(data01[0].label);
			});

			test('it should compare data', function () {
				const data = nodash.copy(data01);

				expect(nodash.equal(1, 1)).to.equal(true);
				expect(nodash.equal(0, 0)).to.equal(true);
				expect(nodash.equal(1, 0)).to.equal(false);

				expect(nodash.equal({ a: 1 }, { a: 1 })).to.equal(true);
				expect(nodash.equal({}, {})).to.equal(true);

				expect(nodash.equal(dataComplex1[0], dataComplex2[0])).to.equal(true);
				expect(nodash.equal(dataComplex1[1], dataComplex2[1])).to.equal(true);
				expect(nodash.equal(dataComplex1[2], dataComplex2[2])).to.equal(true);
				expect(nodash.equal(dataComplex1[3], dataComplex2[3])).to.equal(true);
				expect(nodash.equal(dataComplex1[4], dataComplex2[4])).to.equal(true);
				expect(nodash.equal(dataComplex1, dataComplex2)).to.equal(true);
			});

			test('it should collect values', function () {
				expect(nodash.collectValues(dataItems).join(',')).to.equal('1,0');
			});

		});

	});

	window.mocha.run();

</script>
</body>
</html>